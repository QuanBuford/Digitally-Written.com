{% extends 'base.html' %}

{% block content %}

{% if messages %}
    <ul>
        {% for message in messages %}
            <li>{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %}
    
<h2>Blog Posts</h2>
<ul>
    {% for post in posts %}
        <h2>{{ post.title }}</h2>
        <p>By <a href="{% url 'profile_view' username=post.author.username %}">{{ post.author.username }}</a></p>
        <p>{{ post.content }}</p>

        {% comment %} Show Delete button for treyshel@gmail.com or superuser {% endcomment %}
        {% if user.email == 'treyshel@gmail.com' or user.is_superuser %}
            <a href="{% url 'delete_post_confirmation' post.pk %}" onclick="return confirm('Are you sure you want to delete this post?')">Delete Post</a>
        {% endif %}
    {% endfor %}
</ul>

<div>
    <a href="{% url 'create_post' %}">
        <button>Create a New Post</button>
    </a>
</div>


<div class="pagination">
    {% if posts.has_previous %}
        <a href="?page=1">&laquo; First</a>
        <a href="?page={{ posts.previous_page_number }}">Previous</a>
    {% endif %}

    <span>Page {{ posts.number }} of {{ posts.paginator.num_pages }}</span>

    {% if posts.has_next %}
        <a href="?page={{ posts.next_page_number }}">Next</a>
        <a href="?page={{ posts.paginator.num_pages }}">Last &raquo;</a>
    {% endif %}
</div>

{% endblock %}
